class Solution:
    def numIslands(self, grid: list[list[str]]) -> int:
        islands_count: int = 0

        def search(x: int, y: int):
            """Recursively mark all connected land cells as water"""
            # Check bounds
            if not 0 <= x < len(grid[0]) or not 0 <= y < len(grid):
                return

            # Skip if already water
            if grid[y][x] == "0":
                return

            # Mark as visited by changing to water
            else:
                grid[y][x] = "0"

            # Explore all 4 directions
            for u, v in [(0, 1), (1, 0), (0, -1), (-1, 0)]:
                search(x + u, y + v)

        # Check every cell in the grid
        for y in range(len(grid)):
            for x in range(len(grid[0])):
                if grid[y][x] == "1":
                    islands_count += 1
                    search(x, y)

        return islands_count


if __name__ == "__main__":
    grid1: list[list[str]] = [
        ["1", "1", "1", "1", "0"],
        ["1", "1", "0", "1", "0"],
        ["1", "1", "0", "0", "0"],
        ["0", "0", "0", "0", "0"],
    ]

    grid2: list[list[str]] = [
        ["1", "1", "0", "0", "0"],
        ["1", "1", "0", "0", "0"],
        ["0", "0", "1", "0", "0"],
        ["0", "0", "0", "1", "1"],
    ]

    grid3 = [
        ["0", "0", "1", "0", "0", "1", "0", "0", "0", "0", "0", "0", "0", "0", "1", "1", "0", "1", "0", "0"],
        ["0", "1", "0", "0", "0", "0", "1", "1", "0", "0", "0", "1", "0", "0", "1", "1", "0", "0", "0", "0"],
        ["1", "0", "1", "1", "0", "0", "0", "0", "0", "1", "0", "0", "0", "1", "0", "1", "1", "1", "1", "0"],
        ["1", "1", "0", "0", "0", "0", "0", "0", "0", "0", "1", "0", "0", "1", "1", "1", "1", "1", "1", "1"],
        ["0", "0", "0", "0", "0", "1", "0", "0", "0", "1", "1", "1", "1", "0", "1", "0", "0", "0", "0", "0"],
        ["0", "1", "1", "1", "0", "0", "0", "1", "0", "1", "0", "1", "0", "0", "1", "0", "1", "1", "0", "0"],
        ["0", "0", "0", "0", "0", "0", "0", "0", "1", "1", "1", "0", "0", "1", "1", "0", "0", "0", "0", "0"],
        ["0", "1", "1", "0", "0", "0", "0", "0", "1", "0", "1", "1", "0", "1", "1", "0", "0", "1", "0", "0"],
        ["0", "0", "1", "1", "1", "0", "0", "1", "0", "0", "0", "0", "0", "0", "0", "1", "1", "1", "0", "1"],
        ["1", "1", "0", "0", "0", "1", "0", "1", "0", "0", "0", "1", "1", "0", "0", "1", "0", "1", "1", "0"],
        ["0", "0", "0", "0", "0", "0", "1", "0", "1", "1", "0", "0", "1", "0", "1", "1", "1", "1", "0", "1"],
        ["0", "0", "1", "1", "0", "0", "1", "0", "1", "0", "0", "1", "0", "0", "1", "0", "0", "1", "0", "1"],
        ["0", "1", "0", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0", "0", "1", "1", "1", "0", "0", "0"],
        ["0", "0", "1", "0", "1", "0", "0", "1", "1", "0", "1", "1", "1", "0", "0", "1", "1", "0", "0", "1"],
        ["1", "0", "1", "0", "1", "0", "1", "0", "0", "0", "0", "0", "0", "0", "1", "0", "0", "1", "1", "0"],
        ["1", "0", "1", "1", "1", "0", "1", "0", "0", "0", "0", "0", "0", "1", "0", "0", "0", "0", "1", "1"],
        ["1", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0", "1", "1"],
        ["0", "0", "0", "0", "0", "0", "1", "0", "0", "0", "1", "0", "1", "0", "1", "1", "0", "1", "0", "1"],
        ["1", "0", "0", "1", "0", "0", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0", "1", "1", "1", "1"],
        ["0", "0", "0", "1", "1", "0", "0", "0", "0", "0", "0", "0", "0", "1", "0", "0", "0", "1", "0", "0"],
    ]

    solution = Solution()
    assert solution.numIslands(grid1) == 1
    assert solution.numIslands(grid2) == 3
    assert solution.numIslands(grid3) == 45
